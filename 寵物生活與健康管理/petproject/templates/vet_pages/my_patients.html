{% extends "vet_pages/base.html" %}

{% block content %}
<h2>ğŸ¾ æˆ‘çš„çœ‹è¨ºå¯µç‰©</h2>

{% if pets %}
    <ul>
    {% for pet in pets %}
        <li>
          <div class="pet-card">
            <h3>{{ pet.name }}ï¼ˆé£¼ä¸»ï¼š{{ pet.owner.last_name }}{{ pet.owner.first_name|default:pet.owner.username }}ï¼‰</h3>
            - <a href="{% url 'add_medical_record' pet.id %}">æ–°å¢ç—…ä¾‹</a>
            - <a href="{% url 'add_vaccine' pet.id %}">æ–°å¢ç–«è‹—</a>
            - <a href="{% url 'add_deworm' pet.id %}">æ–°å¢é©…èŸ²</a>
              - <a href="{% url 'add_report' pet.id %}">æ–°å¢å ±å‘Š</a>

            <h4>ç–«è‹—ç´€éŒ„</h4>
            <ul>
              {% for record in pet.vaccine_records.all|dictsortreversed:"date" %}
                <li>
                  ç–«è‹—å“ç‰Œï¼š{{ record.name }}<br>
                  æ–½æ‰“æ™‚é–“ï¼š{{ record.date }}<br>
                  æ–½æ‰“åœ°é»ï¼š{{ record.location }}<br>
                  æ–½æ‰“ç¸é†«ï¼š{{ record.vet }}<br>

                  <a href="{% url 'edit_vaccine' pet.id record.id %}">âœï¸ç·¨è¼¯</a>
                  <a href="{% url 'delete_vaccine' record.id %}" onclick="return confirm('ç¢ºå®šåˆªé™¤é€™ç­†ç–«è‹—ç´€éŒ„å—ï¼Ÿ')">ğŸ—‘ï¸åˆªé™¤</a>
                </li>
              {% empty %}
                <li>ç„¡ç–«è‹—ç´€éŒ„</li>
              {% endfor %}
            </ul>

            <h4>é©…èŸ²ç´€éŒ„</h4>
            <ul>
              {% for record in pet.deworm_records.all|dictsortreversed:"date" %}
                <li>
                  é©…èŸ²å“ç‰Œï¼š{{ record.name }}<br>
                  æ–½æ‰“æ™‚é–“ï¼š{{ record.date }}<br>
                  æ–½æ‰“åœ°é»ï¼š{{ record.location }}<br>
                  æ–½æ‰“ç¸é†«ï¼š{{ record.vet }}<br>

                  <a href="{% url 'edit_deworm' pet.id record.id %}">âœï¸ç·¨è¼¯</a>
                  <a href="{% url 'delete_deworm' record.id %}" onclick="return confirm('ç¢ºå®šåˆªé™¤é€™ç­†é©…èŸ²ç´€éŒ„å—ï¼Ÿ')">ğŸ—‘ï¸åˆªé™¤</a>
                </li>
              {% empty %}
                <li>ç„¡é©…èŸ²ç´€éŒ„</li>
              {% endfor %}
            </ul>

            <h4>å ±å‘Š</h4>
            <ul>
              {% for report in pet.reports.all|dictsortreversed:"date_uploaded" %}
              <li>
                <strong>æ¨™é¡Œï¼š</strong>{{ report.title }}<br>
                <strong>æª”æ¡ˆï¼š</strong><a href="{{ report.pdf.url }}" target="_blank">{{ report.pdf }}</a><br>

                <a href="{% url 'delete_report' report.id %}" onclick="return confirm('ç¢ºå®šåˆªé™¤é€™ä»½å ±å‘Šå—ï¼Ÿ')">ğŸ—‘ï¸åˆªé™¤</a>
              </li>
              {% empty %}
                <li>ç„¡å ±å‘Š</li>
              {% endfor %}
            </ul>
        </div>
    </li>
{% endfor %}
    </ul>

{% else %}
    <p>ç›®å‰æ²’æœ‰çœ‹è¨ºå¯µç‰©ç´€éŒ„ã€‚</p>
{% endif %}

<a href="{% url 'vet_home' %}">â† å›ä¸»æ§å°</a>
{% endblock %}
