{% extends 'base.html' %}

{% block title %}æ¬Šé™è¢«æ‹’çµ• - æ¯›æ—¥å¥½{% endblock %}

{% block content %}
<div class="container">
  <div class="row justify-content-center align-items-center min-vh-100">
    <div class="col-lg-8 col-md-10 text-center">
      <div class="error-card p-5">
        <!-- éŒ¯èª¤åœ–ç¤º -->
        <div class="error-icon mb-4">
          <i class="bi bi-lock" style="font-size: 5rem; color: var(--warning-color);"></i>
        </div>
        
        <!-- éŒ¯èª¤æ¨™é¡Œ -->
        <h2 class="error-title mb-3" style="color: var(--text-dark);">
          <i class="bi bi-shield-x me-2"></i>
          å­˜å–è¢«æ‹’çµ•
        </h2>
        
        <!-- éŒ¯èª¤æè¿° -->
        <div class="error-description mb-4">
          <p class="lead text-muted">å¾ˆæŠ±æ­‰ï¼Œæ‚¨çš„å¸³è™Ÿç„¡æ³•åŸ·è¡Œæ­¤æ“ä½œ ğŸš«</p>
          
          {% if user.is_authenticated %}
            <div class="user-info mb-4 p-3 bg-light rounded">
              <h6 class="mb-2">ç›®å‰ç™»å…¥èº«ä»½ï¼š</h6>
              <div class="d-flex justify-content-center align-items-center flex-wrap">
                <span class="badge bg-primary me-2 mb-2">
                  <i class="bi bi-person-circle me-1"></i>
                  {{ user.get_full_name|default:user.username }}
                </span>
                {% if user.profile %}
                  <span class="badge bg-secondary me-2 mb-2">
                    <i class="bi bi-tag me-1"></i>
                    {% if user.profile.account_type == 'owner' %}
                      é£¼ä¸»å¸³è™Ÿ
                    {% elif user.profile.account_type == 'clinic_admin' %}
                      è¨ºæ‰€ç®¡ç†å“¡
                    {% elif user.profile.account_type == 'vet' %}
                      ç¸é†«å¸«
                    {% else %}
                      {{ user.profile.get_account_type_display }}
                    {% endif %}
                  </span>
                {% endif %}
                {% if user.is_staff %}
                  <span class="badge bg-warning mb-2">
                    <i class="bi bi-gear me-1"></i>
                    ç³»çµ±ç®¡ç†å“¡
                  </span>
                {% endif %}
              </div>
            </div>
          {% endif %}
          
          <div class="possible-reasons">
            <h6 class="text-muted mb-3">å¯èƒ½çš„åŸå› ï¼š</h6>
            <div class="row g-3">
              <div class="col-md-6">
                <div class="reason-card p-3 border rounded">
                  <i class="bi bi-person-x text-warning mb-2" style="font-size: 2rem;"></i>
                  <h6>å¸³è™Ÿé¡å‹é™åˆ¶</h6>
                  <p class="small text-muted mb-0">
                    æ­¤åŠŸèƒ½åƒ…é™ç‰¹å®šé¡å‹çš„ä½¿ç”¨è€…ä½¿ç”¨
                  </p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="reason-card p-3 border rounded">
                  <i class="bi bi-shield-check text-info mb-2" style="font-size: 2rem;"></i>
                  <h6>é©—è­‰ç‹€æ…‹</h6>
                  <p class="small text-muted mb-0">
                    éœ€è¦å®Œæˆå¸³è™Ÿé©—è­‰æˆ–å¯©æ ¸æµç¨‹
                  </p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="reason-card p-3 border rounded">
                  <i class="bi bi-building text-success mb-2" style="font-size: 2rem;"></i>
                  <h6>æ©Ÿæ§‹æ¬Šé™</h6>
                  <p class="small text-muted mb-0">
                    å¯èƒ½éœ€è¦ç‰¹å®šè¨ºæ‰€æˆ–æ©Ÿæ§‹çš„æˆæ¬Š
                  </p>
                </div>
              </div>
              <div class="col-md-6">
                <div class="reason-card p-3 border rounded">
                  <i class="bi bi-clock text-danger mb-2" style="font-size: 2rem;"></i>
                  <h6>æ™‚é–“é™åˆ¶</h6>
                  <p class="small text-muted mb-0">
                    æŸäº›åŠŸèƒ½å¯èƒ½æœ‰ä½¿ç”¨æ™‚é–“é™åˆ¶
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- å»ºè­°æ“ä½œ -->
        <div class="suggested-actions mb-4">
          <h6 class="text-muted mb-3">å»ºè­°æ‚¨ï¼š</h6>
          
          {% if not user.is_authenticated %}
            <div class="alert alert-info">
              <i class="bi bi-info-circle me-2"></i>
              æ‚¨å°šæœªç™»å…¥ï¼Œè«‹å…ˆç™»å…¥å¾Œå†è©¦
            </div>
          {% endif %}
          
          <div class="row g-2">
            <div class="col-md-3">
              <a href="{% url 'home' %}" class="btn btn-primary-custom w-100">
                <i class="bi bi-house-door me-1"></i>
                è¿”å›é¦–é 
              </a>
            </div>
            
            {% if user.is_authenticated %}
              <div class="col-md-3">
                <a href="{% url 'edit_profile' %}" class="btn btn-outline-primary w-100">
                  <i class="bi bi-person-gear me-1"></i>
                  æª¢æŸ¥å¸³è™Ÿ
                </a>
              </div>
              
              {% if user.profile.account_type == 'vet' and not user.profile.is_verified_vet %}
                <div class="col-md-3">
                  <a href="{% url 'verify_vet_license' %}" class="btn btn-warning w-100">
                    <i class="bi bi-patch-check me-1"></i>
                    é©—è­‰åŸ·ç…§
                  </a>
                </div>
              {% endif %}
              
              <div class="col-md-3">
                <a href="{% url 'account_logout' %}" class="btn btn-outline-secondary w-100">
                  <i class="bi bi-box-arrow-right me-1"></i>
                  åˆ‡æ›å¸³è™Ÿ
                </a>
              </div>
            {% else %}
              <div class="col-md-3">
                <a href="{% url 'account_login' %}" class="btn btn-success w-100">
                  <i class="bi bi-box-arrow-in-right me-1"></i>
                  ç«‹å³ç™»å…¥
                </a>
              </div>
              <div class="col-md-3">
                <a href="{% url 'account_signup' %}" class="btn btn-outline-success w-100">
                  <i class="bi bi-person-plus me-1"></i>
                  è¨»å†Šå¸³è™Ÿ
                </a>
              </div>
              <div class="col-md-3">
                <a href="{% url 'clinic_registration' %}" class="btn btn-info w-100">
                  <i class="bi bi-hospital me-1"></i>
                  è¨ºæ‰€è¨»å†Š
                </a>
              </div>
            {% endif %}
          </div>
        </div>
        
        <!-- è¯çµ¡å®¢æœ -->
        <div class="contact-support mb-4">
          <div class="alert alert-light border-primary">
            <h6 class="alert-heading">
              <i class="bi bi-headset text-primary me-2"></i>
              éœ€è¦å”åŠ©ï¼Ÿ
            </h6>
            <p class="mb-2">å¦‚æœæ‚¨èªç‚ºé€™æ˜¯éŒ¯èª¤ï¼Œæˆ–éœ€è¦ç”³è«‹ç‰¹æ®Šæ¬Šé™ï¼Œè«‹è¯çµ¡æˆ‘å€‘çš„å®¢æœåœ˜éšŠï¼š</p>
            <div class="row g-2">
              <div class="col-md-6">
                <a href="mailto:pawday114404@gmail.com" class="btn btn-outline-primary btn-sm w-100">
                  <i class="bi bi-envelope me-1"></i>
                  ç™¼é€Email
                </a>
              </div>
              <div class="col-md-6">
                <a href="tel:+886255667788" class="btn btn-outline-primary btn-sm w-100">
                  <i class="bi bi-telephone me-1"></i>
                  æ’¥æ‰“é›»è©±
                </a>
              </div>
            </div>
          </div>
        </div>
        
        <!-- å¯æ„›çš„å®ˆé–€å“¡æ’åœ–å€åŸŸ -->
        <div class="mt-5 text-muted">
          <div style="font-size: 2rem; margin-bottom: 1rem;">ğŸ•â€ğŸ¦ºğŸšª</div>
          <small>æˆ‘å€‘çš„å®ˆé–€çŠ¬æ­£åœ¨ä¿è­·é€™å€‹åŠŸèƒ½çš„å®‰å…¨ï¼</small>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.error-card {
  background: linear-gradient(135deg, #ffffff 0%, var(--warm-card) 100%);
  border-radius: 20px;
  box-shadow: 0 8px 32px var(--shadow-light);
  border: 1px solid var(--border-light);
}

.error-icon {
  animation: swing 2s infinite;
}

@keyframes swing {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(10deg); }
  75% { transform: rotate(-10deg); }
}

.reason-card {
  transition: all 0.3s ease;
  text-align: center;
  height: 100%;
}

.reason-card:hover {
  background-color: var(--warm-bg);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px var(--shadow-light);
}

.user-info {
  border-left: 4px solid var(--primary-orange);
}

.suggested-actions .btn {
  font-size: 0.9rem;
}

.min-vh-100 {
  min-height: calc(100vh - 200px);
}

@media (max-width: 768px) {
  .reason-card {
    margin-bottom: 1rem;
  }
  
  .suggested-actions .col-md-3 {
    margin-bottom: 0.5rem;
  }
}
</style>
{% endblock %}