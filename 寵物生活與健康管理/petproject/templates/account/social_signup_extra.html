<!-- templates/account/social_signup_extra.html -->
{% extends "account/base.html" %}

{% block title %}補充註冊資料{% endblock %}

{% block extra_css %}
<style>
.form-box {
    background-color: white;
    padding: 40px;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0,0,0,0.1);
    width: 100%;
    max-width: 400px;
}
h2 {
    color: #ffaa00;
    text-align: center;
    margin-bottom: 30px;
}
form {
    text-align: left;
}
label {
    display: block;
    margin-bottom: 6px;
    font-weight: bold;
    color: #333;
}
input[type="text"], input[type="file"], select {
    width: 100%;
    padding: 12px 16px;
    margin-bottom: 12px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 16px;
    height: 48px;
    background-color: white;
    box-sizing: border-box;
}
.hint {
    font-size: 14px;
    color: #777;
    margin-bottom: 12px;
}
button {
    background-color: #ffaa00;
    color: white;
    border: none;
    padding: 12px;
    border-radius: 6px;
    font-size: 16px;
    width: 100%;
    cursor: pointer;
}
button:hover {
    background-color: #ff8800;
}
</style>
{% endblock %}

{% block content %}
<div class="form-box">
    <h2>補充註冊資料</h2>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <label for="{{ form.account_type.id_for_label }}">{{ form.account_type.label }}</label>
        {{ form.account_type }}
        {{ form.account_type.errors }}

        <label for="{{ form.username.id_for_label }}">{{ form.username.label }}</label>
        {{ form.username }}
        {{ form.username.errors }}

        <label for="{{ form.phone_number.id_for_label }}">{{ form.phone_number.label }}</label>
        {{ form.phone_number }}
        {{ form.phone_number.errors }}

        <div id="vet-fields" style="display: none;">
            <label for="{{ form.vet_license_city.id_for_label }}">{{ form.vet_license_city.label }}</label>
            {{ form.vet_license_city }}
            {{ form.vet_license_city.errors }}

            <label for="{{ form.vet_license.id_for_label }}">{{ form.vet_license.label }}</label>
            {{ form.vet_license }}
            {{ form.vet_license.errors }}
            <p class="hint">僅限 PDF、JPG、JPEG 或 PNG，最大 5MB。</p>

            <label for="{{ form.clinic_name.id_for_label }}">醫院／診所名稱</label>
            {{ form.clinic_name }}
            {{ form.clinic_name.errors }}

            <label for="{{ form.clinic_address.id_for_label }}">醫院／診所地址</label>
            {{ form.clinic_address }}
            {{ form.clinic_address.errors }}
        </div>
        <button type="submit">送出</button>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    const accountType = document.getElementById('id_account_type');
    const vetFields = document.getElementById('vet-fields');
    const cityInput = document.getElementById('id_vet_license_city');
    const licenseInput = document.getElementById('id_vet_license');
    const clinicNameInput = document.getElementById('id_clinic_name');
    const clinicAddressInput = document.getElementById('id_clinic_address');

    vetFields.style.display = 'none';

    function toggleVetFields() {
        const isVet = accountType.value === 'vet';
        vetFields.style.display = isVet ? 'block' : 'none';
        cityInput.required = isVet;
        licenseInput.required = isVet;
        clinicNameInput.required = isVet;
        clinicAddressInput.required = isVet;
    }

    accountType.addEventListener('change', toggleVetFields);
    toggleVetFields();
});
</script>
{% endblock %}
