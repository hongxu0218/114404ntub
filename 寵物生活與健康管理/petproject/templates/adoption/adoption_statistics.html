<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµ±è¨ˆè³‡è¨Š - èªé ˜é¤Šå¹³å°</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .header { background: #007bff; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; padding: 20px; text-align: center; }
        .chart-section { background: white; border: 1px solid #ddd; border-radius: 8px; padding: 20px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f8f9fa; }
        .progress-bar { background: #e9ecef; height: 20px; border-radius: 10px; overflow: hidden; }
        .progress-fill { background: #007bff; height: 100%; transition: width 0.3s ease; }
        .btn { padding: 8px 16px; text-decoration: none; border-radius: 4px; display: inline-block; margin: 2px; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .shelter-name { 
            max-width: 200px; 
            overflow: hidden; 
            text-overflow: ellipsis; 
            white-space: nowrap; 
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“Š èªé ˜é¤Šçµ±è¨ˆè³‡è¨Š</h1>
        <a href="/adoption/" class="btn btn-primary">å›é¦–é </a>
        <a href="/adoption/list/" class="btn btn-success">ç€è¦½å‹•ç‰©</a>
    </div>

    <!-- ç¸½é«”çµ±è¨ˆ -->
    <div class="stats-grid">
        <div class="stat-card">
            <h2 style="color: #007bff; margin: 0;">{{ total_animals }}</h2>
            <h4>ç¸½ç™»è¨˜å‹•ç‰©æ•¸</h4>
            <p>ç›®å‰ç³»çµ±ä¸­æ‰€æœ‰çš„å‹•ç‰©è³‡æ–™</p>
        </div>
        <div class="stat-card">
            <h2 style="color: #28a745; margin: 0;">{{ available_animals }}</h2>
            <h4>ç­‰å¾…èªé¤Šå‹•ç‰©</h4>
            <p>ç›®å‰é–‹æ”¾èªé¤Šçš„å‹•ç‰©æ•¸é‡</p>
        </div>
    </div>

    <div class="stats-grid">
        <!-- æŒ‰ç¨®é¡çµ±è¨ˆ -->
        <div class="chart-section">
            <h3>ğŸ¾ å‹•ç‰©ç¨®é¡åˆ†å¸ƒ</h3>
            {% if kind_stats %}
            <table>
                <thead>
                    <tr>
                        <th>å‹•ç‰©ç¨®é¡</th>
                        <th>æ•¸é‡</th>
                        <th>æ¯”ä¾‹</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stat in kind_stats %}
                    {% if stat.animal_kind %}
                    <tr>
                        <td>
                            <a href="/adoption/list/?kind={{ stat.animal_kind }}" style="text-decoration: none; color: #007bff;">
                                {{ stat.animal_kind }}
                            </a>
                        </td>
                        <td>{{ stat.count }}</td>
                        <td>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {% widthratio stat.count total_animals 100 %}%"></div>
                            </div>
                            {% widthratio stat.count total_animals 100 %}%
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>æš«ç„¡çµ±è¨ˆè³‡æ–™</p>
            {% endif %}
        </div>

        <!-- æŒ‰æ”¶å®¹æ‰€çµ±è¨ˆ -->
        <div class="chart-section">
            <h3>ğŸ¥ æ”¶å®¹æ‰€åˆ†å¸ƒ (å‰10å)</h3>
            {% if shelter_stats %}
            <table>
                <thead>
                    <tr>
                        <th style="width: 50%;">æ”¶å®¹æ‰€åç¨±</th>
                        <th style="width: 20%;">å‹•ç‰©æ•¸é‡</th>
                        <th style="width: 30%;">æ¯”ä¾‹</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stat in shelter_stats %}
                    {% if stat.shelter_name %}
                    <tr>
                        <td class="shelter-name" title="{{ stat.shelter_name }}">
                            {{ stat.shelter_name }}
                        </td>
                        <td>{{ stat.count }}</td>
                        <td>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: {% widthratio stat.count total_animals 100 %}%; background: #17a2b8;"></div>
                            </div>
                            {% widthratio stat.count total_animals 100 %}%
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p>æš«ç„¡çµ±è¨ˆè³‡æ–™</p>
            {% endif %}
        </div>
    </div>

    <!-- å¿«é€Ÿé€£çµ -->
    <div class="chart-section" style="text-align: center;">
        <h3>æƒ³è¦èªé¤Šå‹•ç‰©å—ï¼Ÿ</h3>
        <p>ç€è¦½æ‰€æœ‰ç­‰å¾…èªé¤Šçš„å¯æ„›å‹•ç‰©</p>
        <a href="/adoption/list/" class="btn btn-success" style="font-size: 16px; padding: 12px 24px;">
            ğŸ’ æŸ¥çœ‹æ‰€æœ‰å‹•ç‰©
        </a>
    </div>
</body>
</html>