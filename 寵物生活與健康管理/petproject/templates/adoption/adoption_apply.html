<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”³è«‹èªé¤Š {{ animal.animal_title|default:"å‹•ç‰©" }} - èªé ˜é¤Šå¹³å°</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background-color: #f8f9fa; 
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
        }
        .header { 
            background: #007bff; 
            color: white; 
            padding: 20px; 
            border-radius: 8px 8px 0 0; 
        }
        .content { 
            padding: 30px; 
        }
        .btn { 
            padding: 8px 16px; 
            text-decoration: none; 
            border-radius: 4px; 
            display: inline-block; 
            margin: 2px; 
            border: none;
            cursor: pointer;
        }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; font-size: 16px; padding: 12px 24px; }
        .btn-outline { background: white; color: #007bff; border: 1px solid #007bff; }
        
        .animal-preview { 
            background: #f8f9fa; 
            border: 1px solid #dee2e6; 
            border-radius: 8px; 
            padding: 20px; 
            margin-bottom: 30px; 
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .animal-preview img { 
            width: 120px; 
            height: 120px; 
            object-fit: cover; 
            border-radius: 8px; 
        }
        .animal-info h3 { margin: 0 0 10px 0; color: #007bff; }
        .animal-info p { margin: 5px 0; color: #666; }
        
        .form-section { 
            background: white; 
            border: 1px solid #dee2e6; 
            border-radius: 8px; 
            padding: 25px; 
            margin-bottom: 20px; 
        }
        .form-section h3 { 
            margin: 0 0 20px 0; 
            color: #495057; 
            border-bottom: 2px solid #007bff; 
            padding-bottom: 10px; 
        }
        
        .form-group { 
            margin-bottom: 20px; 
        }
        .form-group label { 
            display: block; 
            margin-bottom: 5px; 
            font-weight: bold; 
            color: #495057; 
        }
        .required { color: #dc3545; }
        
        .form-control { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #ced4da; 
            border-radius: 4px; 
            font-size: 16px;
            box-sizing: border-box;
        }
        .form-control:focus { 
            border-color: #007bff; 
            outline: none; 
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25); 
        }
        
        .form-row { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
        }
        
        textarea.form-control { 
            resize: vertical; 
            min-height: 100px; 
        }
        
        .checkbox-group { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            padding: 15px; 
            background: #e3f2fd; 
            border-radius: 4px; 
        }
        .checkbox-group input[type="checkbox"] { 
            width: 18px; 
            height: 18px; 
        }
        
        .notice { 
            background: #d1ecf1; 
            border: 1px solid #bee5eb; 
            border-radius: 4px; 
            padding: 20px; 
            margin: 20px 0; 
        }
        .notice h4 { 
            margin: 0 0 10px 0; 
            color: #0c5460; 
        }
        .notice ul { 
            margin: 0; 
            padding-left: 20px; 
            color: #0c5460; 
        }
        
        .form-actions { 
            text-align: right; 
            padding-top: 20px; 
            border-top: 1px solid #dee2e6; 
        }
        
        @media (max-width: 768px) {
            .form-row { grid-template-columns: 1fr; }
            .animal-preview { flex-direction: column; text-align: center; }
            .content { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ èªé¤Šç”³è«‹è¡¨</h1>
            <a href="/adoption/detail/{{ animal.animal_id }}/" class="btn btn-outline">è¿”å›å‹•ç‰©è©³æƒ…</a>
            <a href="/adoption/list/" class="btn btn-outline">è¿”å›åˆ—è¡¨</a>
        </div>

        <div class="content">
            <!-- å‹•ç‰©è³‡è¨Šæ¦‚è¦½ -->
            <div class="animal-preview">
                <img src="{{ animal.album_file|default:'/static/images/no-pet-image.jpg' }}" 
                     alt="{{ animal.animal_title }}"
                     onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhmOWZhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iIzZjNzU3ZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuayoeWcluePuzwvdGV4dD48L3N2Zz4='">
                <div class="animal-info">
                    <h3>{{ animal.animal_title|default:"å¯æ„›çš„å°å¯¶è²" }}</h3>
                    <p><strong>ç¨®é¡ï¼š</strong>{{ animal.animal_kind }} | <strong>æ€§åˆ¥ï¼š</strong>{{ animal.animal_sex }} | <strong>å¹´é½¡ï¼š</strong>{{ animal.animal_age }}</p>
                    <p><strong>æ”¶å®¹æ‰€ï¼š</strong>{{ animal.shelter_name }}</p>
                    <p><strong>å‹•ç‰©ç·¨è™Ÿï¼š</strong>{{ animal.animal_id }}</p>
                </div>
            </div>

            <!-- ç”³è«‹è¡¨å–® -->
            <form method="post">
                {% csrf_token %}
                
                <!-- ç”³è«‹äººåŸºæœ¬è³‡æ–™ -->
                <div class="form-section">
                    <h3>ğŸ‘¤ ç”³è«‹äººåŸºæœ¬è³‡æ–™</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="applicant_name">ç”³è«‹äººå§“å <span class="required">*</span></label>
                            <input type="text" 
                                   class="form-control" 
                                   id="applicant_name" 
                                   name="applicant_name" 
                                   value="{{ user.last_name }}{{ user.first_name }}" 
                                   required>
                        </div>
                        <div class="form-group">
                            <label for="applicant_phone">è¯çµ¡é›»è©± <span class="required">*</span></label>
                            <input type="tel" 
                                   class="form-control" 
                                   id="applicant_phone" 
                                   name="applicant_phone" 
                                   value="{{ user.profile.phone_number|default:'' }}" 
                                   placeholder="è«‹è¼¸å…¥æ‚¨çš„æ‰‹æ©Ÿè™Ÿç¢¼"
                                   required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="applicant_email">é›»å­ä¿¡ç®± <span class="required">*</span></label>
                        <input type="email" 
                               class="form-control" 
                               id="applicant_email" 
                               name="applicant_email" 
                               value="{{ user.email }}" 
                               required>
                    </div>

                    <div class="form-group">
                        <label for="applicant_address">å±…ä½åœ°å€ <span class="required">*</span></label>
                        <textarea class="form-control" 
                                  id="applicant_address" 
                                  name="applicant_address" 
                                  rows="3" 
                                  placeholder="è«‹è©³ç´°å¡«å¯«æ‚¨çš„å±…ä½åœ°å€ï¼ˆåŒ…å«ç¸£å¸‚ã€å€åŸŸã€è¡—é“ç­‰ï¼‰" 
                                  required></textarea>
                    </div>
                </div>

                <!-- å±…ä½ç’°å¢ƒèˆ‡é£¼é¤Šæ¢ä»¶ -->
                <div class="form-section">
                    <h3>ğŸ  å±…ä½ç’°å¢ƒèˆ‡é£¼é¤Šæ¢ä»¶</h3>
                    
                    <div class="form-group">
                        <label for="housing_type">å±…ä½ç’°å¢ƒ <span class="required">*</span></label>
                        <select class="form-control" id="housing_type" name="housing_type" required>
                            <option value="">è«‹é¸æ“‡æ‚¨çš„å±…ä½ç’°å¢ƒ</option>
                            <option value="é€å¤©å">é€å¤©å</option>
                            <option value="å…¬å¯“">å…¬å¯“</option>
                            <option value="å¤§å»ˆ">å¤§å»ˆ</option>
                            <option value="å¥—æˆ¿">å¥—æˆ¿</option>
                            <option value="å…¶ä»–">å…¶ä»–</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="experience">é£¼é¤Šç¶“é©— <span class="required">*</span></label>
                        <textarea class="form-control" 
                                  id="experience" 
                                  name="experience" 
                                  rows="4" 
                                  placeholder="è«‹è©³ç´°æè¿°æ‚¨çš„å¯µç‰©é£¼é¤Šç¶“é©—ï¼ŒåŒ…æ‹¬ï¼š&#10;â€¢ æ›¾ç¶“é£¼é¤Šéä»€éº¼å‹•ç‰©ï¼Ÿ&#10;â€¢ é£¼é¤Šäº†å¤šä¹…ï¼Ÿ&#10;â€¢ å¦‚ä½•ç…§é¡§å¯µç‰©çš„å¥åº·ï¼Ÿ&#10;â€¢ é‡åˆ°éä»€éº¼å•é¡ŒåŠå¦‚ä½•è§£æ±ºï¼Ÿ&#10;â€¢ å¦‚æœæ²’æœ‰ç¶“é©—ï¼Œè«‹èªªæ˜æ‚¨çš„å­¸ç¿’è¨ˆåŠƒ" 
                                  required></textarea>
                    </div>
                </div>

                <!-- èªé¤Šæ‰¿è«¾ -->
                <div class="form-section">
                    <h3>ğŸ’ èªé¤Šæ‰¿è«¾</h3>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" 
                                   id="family_consent" 
                                   name="family_consent" 
                                   required>
                            <label for="family_consent">
                                æˆ‘ç¢ºèªå®¶äººéƒ½åŒæ„èªé¤Šæ­¤å‹•ç‰©ï¼Œä¸¦é¡˜æ„å…±åŒæ‰¿æ“”ç…§é¡§è²¬ä»» <span class="required">*</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- ç”³è«‹é ˆçŸ¥ -->
                <div class="notice">
                    <h4>ğŸ“‹ ç”³è«‹é ˆçŸ¥èˆ‡æ‰¿è«¾</h4>
                    <ul>
                        <li><strong>å¯©æ ¸æµç¨‹ï¼š</strong>æ”¶å®¹æ‰€æœƒå¯©æ ¸æ‚¨çš„ç”³è«‹è³‡æ–™ï¼Œå¯©æ ¸é€šéå¾Œæœƒèˆ‡æ‚¨è¯çµ¡å®‰æ’é¢è«‡</li>
                        <li><strong>é£¼é¤Šè²¬ä»»ï¼š</strong>è«‹ç¢ºä¿æ‚¨æœ‰è¶³å¤ çš„æ™‚é–“ã€ç¶“æ¿Ÿèƒ½åŠ›å’Œæ„›å¿ƒç…§é¡§å‹•ç‰©</li>
                        <li><strong>é†«ç™‚ç…§é¡§ï¼š</strong>èªé¤Šå¾Œè«‹å®šæœŸç‚ºå‹•ç‰©é€²è¡Œå¥åº·æª¢æŸ¥å’Œæ–½æ‰“ç–«è‹—</li>
                        <li><strong>çµ‚ç”Ÿæ‰¿è«¾ï¼š</strong>å¯µç‰©èªé¤Šæ˜¯çµ‚ç”Ÿçš„æ‰¿è«¾ï¼Œè«‹å‹¿å› æ¬å®¶ã€çµå©šç­‰å› ç´ æ£„é¤Š</li>
                        <li><strong>è¯çµ¡ç¾©å‹™ï¼š</strong>èªé¤Šå¾Œè«‹å®šæœŸå›å ±å‹•ç‰©ç‹€æ³ï¼Œæ¥å—å¿…è¦çš„è¿½è¹¤è¨ªå•</li>
                        <li><strong>æ³•å¾‹è²¬ä»»ï¼š</strong>è‹¥æœ‰è™å¾…æˆ–æ£„é¤Šè¡Œç‚ºï¼Œå°‡ä¾æ³•è¿½ç©¶ç›¸é—œè²¬ä»»</li>
                    </ul>
                </div>

                <!-- è¡¨å–®æ“ä½œæŒ‰éˆ• -->
                <div class="form-actions">
                    <a href="/adoption/detail/{{ animal.animal_id }}/" 
                       class="btn btn-outline" 
                       style="margin-right: 10px;">å–æ¶ˆ</a>
                    <button type="submit" class="btn btn-success">
                        ğŸ“¤ æäº¤ç”³è«‹
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // è¡¨å–®é©—è­‰
        document.querySelector('form').addEventListener('submit', function(e) {
            const required = document.querySelectorAll('[required]');
            let hasError = false;
            
            required.forEach(field => {
                if (!field.value.trim()) {
                    field.style.borderColor = '#dc3545';
                    hasError = true;
                } else {
                    field.style.borderColor = '#ced4da';
                }
            });
            
            if (hasError) {
                e.preventDefault();
                alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½');
                return false;
            }
            
            // ç¢ºèªæäº¤
            if (!confirm('ç¢ºå®šè¦æäº¤èªé¤Šç”³è«‹å—ï¼Ÿæäº¤å¾Œå°‡ç„¡æ³•ä¿®æ”¹ã€‚')) {
                e.preventDefault();
                return false;
            }
        });

        // é›»è©±è™Ÿç¢¼æ ¼å¼åŒ–
        document.getElementById('applicant_phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 10) value = value.substring(0, 10);
            e.target.value = value;
        });
    </script>
</body>
</html>