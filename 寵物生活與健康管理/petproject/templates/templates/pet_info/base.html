<!-- templates/pet_info/base.html -->
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}æ¯›æ—¥å¥½(Paw&Day){% endblock %}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f7f7f7;
        }

        /* å°è¦½åˆ—å…è¨±æ›è¡Œ */
        .navbar {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-end;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }
        .nav-btn {
            background-color: #ffffff;
            border: 1px solid #007bff;
            color: #007bff;
            padding: 8px 16px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: 0.3s;
        }
        .nav-btn:hover {
            background-color: #007bff;
            color: white;
        }
        
        /* é è¨­è®“è¿”å›æ’åœ¨æœ€å‰é¢ */
        .back-btn {
            order: -1;
        
        }
        /* å¯é¸ï¼šé è¨­è®“å®ƒåœ¨æœ€å·¦å´ */
        .left-nav {
            display: flex;
        }

        /* ç•¶ç•«é¢å¯¬åº¦å°æ–¼ 768pxï¼Œè‡ªå‹•è®“ back-btn è·‘åˆ°ä¸‹ä¸€åˆ— */
        @media (max-width: 768px) {
            .navbar {
                flex-wrap: wrap;
            }
            .left-nav {
                width: 100%;
                margin-bottom: 10px;
            }
            .back-btn {
                order: 10;
                width: auto;
                margin-top: 10px;
            }
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body>
    <!-- å°è¦½åˆ— -->
    <div class="navbar" style="display: flex; justify-content: space-between; align-items: center;">
        <!-- å·¦å´ï¼šè¿”å›æŒ‰éˆ• -->
        <div class="left-nav">
            <a href="javascript:history.back()" class="nav-btn back-btn">â† è¿”å›</a>
        </div>

        <!-- å³å´ï¼šåŠŸèƒ½é¸å–®èˆ‡ç™»å…¥å€å¡Š -->
        <div class="right-nav" style="display: flex; gap: 10px; align-items: center;">
            <a href="{% url 'pet_list' %}" class="nav-btn">ğŸ¾ å¯µç‰©</a>
            <a href="{% url 'health_rec' %}" class="nav-btn">ğŸ©º å¥åº·è¨˜éŒ„</a>
            <div style="position: relative;">
                <div class="nav-btn" onclick="toggleNotice()" style="cursor: pointer;">
                    <span class="nav-label">ğŸ”” é€šçŸ¥</span>
                        {% if notif_count > 0 %}
                            <span id="notif-count" style="
                                position: absolute;
                                top: -5px;
                                right: -10px;
                                background-color: red;
                                color: white;
                                font-size: 12px;
                                font-weight: bold;
                                border-radius: 50%;
                                padding: 2px 6px;
                                line-height: 1;
                                display: inline-block;
                            ">
                                {{ notif_count }}
                            </span>
                        {% endif %}
                </div>

                <div id="notification-box" class="notification-box unread" style="display: none; position: absolute; top: 100%; right: 0; border: 1px solid #ccc; padding: 10px; z-index: 99; min-width: 280px; background-color: #ffffff;">
                    {% if tomorrow_appointments %}

                    <div>æ˜æ—¥é ç´„æé†’</div>

                        <ul style="list-style: disc; padding-left: 20px; margin: 5px 0;">
                            {% for appt in tomorrow_appointments %}
                            <li style="cursor: pointer;">
                                <span onclick="markAsRead()">
                                    {{ appt.pet.name }}ï½œ{{ appt.time }}<br>
                                    {{ appt.vet.clinic_name }}ï¼ˆ{{ appt.vet.user.last_name }}{{ appt.vet.user.first_name }}ï¼‰
                                </span>
                            </li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <em style="color: #888;">ç„¡å³å°‡åˆ°ä¾†çš„é ç´„</em>
                    {% endif %}
                </div>
            </div>

            {% if user.is_authenticated %}
                <a href="{% url 'account_logout' %}" class="nav-btn">ç™»å‡º</a>
            {% else %}                    
                <a href="{% url 'account_login' %}" class="nav-btn">ç™»å…¥</a>
                <a href="{% url 'account_signup' %}" class="nav-btn">è¨»å†Š</a>
            {% endif %}
        
        </div>

    </div>

    {% block content %}
    {% endblock %}

    {% block extra_script %}{% endblock %}
</body>
</html>